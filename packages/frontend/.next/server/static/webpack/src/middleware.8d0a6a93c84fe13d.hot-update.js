"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config),\n/* harmony export */   \"middleware\": () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/../../node_modules/.pnpm/next@13.4.4_cpvzbyutg2okhbbkipcbqd7uwi/node_modules/next/dist/esm/server/web/exports/next-response.js\");\n\nfunction middleware(req) {\n    // 反向代理\n    const apiUrlStart = [\n        \"/auth\",\n        \"/message\",\n        \"/user\"\n    ];\n    const pathname = req.nextUrl.pathname;\n    if (apiUrlStart.some((val)=>pathname.startsWith(val))) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rewrite(new URL(pathname, process.env.HTTPAPIURL));\n    }\n    // 路由重定向\n    const session = req.cookies.get(\"session\")?.value;\n    if (pathname === \"/home\" && !session) {\n        console.log(1);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/\", req.nextUrl.origin));\n    } else if (pathname !== \"/home\" && session) {\n        console.log(pathname);\n        console.log(2);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/home\", req.nextUrl.origin));\n    }\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].next();\n}\n// 匹配器\nconst config = {\n    // (?!_next) 匹配不包含 _next 路径\n    matcher: [\n        \"/((?!_next/static|api|favicon.ico|bgImage1.jpg).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVEO0FBR2hELFNBQVNDLFdBQVdDLEdBQWdCO0lBQ3pDLE9BQU87SUFDUCxNQUFNQyxjQUFjO1FBQUM7UUFBUztRQUFZO0tBQVE7SUFDbEQsTUFBTUMsV0FBV0YsSUFBSUcsUUFBUUQ7SUFDN0IsSUFBSUQsWUFBWUcsS0FBSyxDQUFDQyxNQUFRSCxTQUFTSSxXQUFXRCxPQUFPO1FBQ3ZELE9BQU9QLDBGQUFvQlMsQ0FBQyxJQUFJQyxJQUFJTixVQUFVTyxRQUFRQyxJQUFJQztJQUM1RDtJQUNBLFFBQVE7SUFDUixNQUFNQyxVQUFVWixJQUFJYSxRQUFRQyxJQUFJLFlBQVlDO0lBQzVDLElBQUliLGFBQWEsV0FBVyxDQUFDVSxTQUFTO1FBQ3BDSSxRQUFRQyxJQUFJO1FBRVosT0FBT25CLDJGQUFxQm9CLENBQUMsSUFBSVYsSUFBSSxLQUFLUixJQUFJRyxRQUFRZ0I7SUFDeEQsT0FBTyxJQUFJakIsYUFBYSxXQUFXVSxTQUFTO1FBQzFDSSxRQUFRQyxJQUFJZjtRQUVaYyxRQUFRQyxJQUFJO1FBQ1osT0FBT25CLDJGQUFxQm9CLENBQUMsSUFBSVYsSUFBSSxTQUFTUixJQUFJRyxRQUFRZ0I7SUFDNUQ7SUFDQSxPQUFPckIsdUZBQWlCc0I7QUFDMUI7QUFFQSxNQUFNO0FBQ0MsTUFBTUMsU0FBUztJQUNwQiwyQkFBMkI7SUFDM0JDLFNBQVM7UUFBQztLQUFxRDtBQUNqRSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLnRzP2QxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgTUNSZXF1ZXN0IGZyb20gJ0Avc2VydmljZS9pbmRleCdcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICAvLyDlj43lkJHku6PnkIZcclxuICBjb25zdCBhcGlVcmxTdGFydCA9IFsnL2F1dGgnLCAnL21lc3NhZ2UnLCAnL3VzZXInXVxyXG4gIGNvbnN0IHBhdGhuYW1lID0gcmVxLm5leHRVcmwucGF0aG5hbWVcclxuICBpZiAoYXBpVXJsU3RhcnQuc29tZSgodmFsKSA9PiBwYXRobmFtZS5zdGFydHNXaXRoKHZhbCkpKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJld3JpdGUobmV3IFVSTChwYXRobmFtZSwgcHJvY2Vzcy5lbnYuSFRUUEFQSVVSTCkpXHJcbiAgfVxyXG4gIC8vIOi3r+eUsemHjeWumuWQkVxyXG4gIGNvbnN0IHNlc3Npb24gPSByZXEuY29va2llcy5nZXQoJ3Nlc3Npb24nKT8udmFsdWVcclxuICBpZiAocGF0aG5hbWUgPT09ICcvaG9tZScgJiYgIXNlc3Npb24pIHtcclxuICAgIGNvbnNvbGUubG9nKDEpXHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvJywgcmVxLm5leHRVcmwub3JpZ2luKSlcclxuICB9IGVsc2UgaWYgKHBhdGhuYW1lICE9PSAnL2hvbWUnICYmIHNlc3Npb24pIHtcclxuICAgIGNvbnNvbGUubG9nKHBhdGhuYW1lKVxyXG5cclxuICAgIGNvbnNvbGUubG9nKDIpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9ob21lJywgcmVxLm5leHRVcmwub3JpZ2luKSlcclxuICB9XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KClcclxufVxyXG5cclxuLy8g5Yy56YWN5ZmoXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgLy8gKD8hX25leHQpIOWMuemFjeS4jeWMheWQqyBfbmV4dCDot6/lvoRcclxuICBtYXRjaGVyOiBbJy8oKD8hX25leHQvc3RhdGljfGFwaXxmYXZpY29uLmljb3xiZ0ltYWdlMS5qcGcpLiopJ11cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibWlkZGxld2FyZSIsInJlcSIsImFwaVVybFN0YXJ0IiwicGF0aG5hbWUiLCJuZXh0VXJsIiwic29tZSIsInZhbCIsInN0YXJ0c1dpdGgiLCJyZXdyaXRlIiwiVVJMIiwicHJvY2VzcyIsImVudiIsIkhUVFBBUElVUkwiLCJzZXNzaW9uIiwiY29va2llcyIsImdldCIsInZhbHVlIiwiY29uc29sZSIsImxvZyIsInJlZGlyZWN0Iiwib3JpZ2luIiwibmV4dCIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});